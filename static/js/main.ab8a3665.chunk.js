(this["webpackJsonpproyecto-frontend-creditas"]=this["webpackJsonpproyecto-frontend-creditas"]||[]).push([[0],{166:function(e,t,r){e.exports=r.p+"static/media/phoneBear.b268748b.jpg"},193:function(e,t,r){e.exports=r(357)},198:function(e,t,r){},199:function(e,t,r){},200:function(e,t,r){},224:function(e,t,r){},225:function(e,t,r){},226:function(e,t,r){},227:function(e,t,r){},228:function(e,t,r){},229:function(e,t,r){},354:function(e,t,r){},355:function(e,t,r){},356:function(e,t,r){},357:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(10),s=r.n(o),i=(r(198),r(199),r(59)),c=r(33),u=r(392),l=r(161),h=r.n(l);r(200);var p=Object(c.g)((function(e){return a.a.createElement("div",{className:"BackButton",style:{visibility:e.visibility}},a.a.createElement(u.a,{size:"small",color:"inherit",onClick:function(){return e.history.goBack()}},a.a.createElement(h.a,{color:"inherit"})))})),m=r(6),d=r.n(m),g=r(11),f=r(21),v=r(15),b=r(48),E=r.n(b),w=new(function(){function e(){Object(f.a)(this,e),this.BASE_URL_PHONE="https://app-backend-creditas.herokuapp.com/api/v1/products",this.BASE_URL_USER="https://app-backend-creditas.herokuapp.com/api/v1/user"}return Object(v.a)(e,[{key:"getAllCheapestModelsWithStockPaged",value:function(){var e=Object(g.a)(d.a.mark((function e(t){var r,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get("".concat(this.BASE_URL_PHONE,"/allCheapestModelsWithStockPaged/").concat(t));case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllProductsOfThisModelWithStockOrderedByPrice",value:function(){var e=Object(g.a)(d.a.mark((function e(t){var r,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get("".concat(this.BASE_URL_PHONE,"/allProductsOfThisModelWithStockOrderedByPrice/").concat(t));case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPhonesFilteredByKeywords",value:function(){var e=Object(g.a)(d.a.mark((function e(t){var r,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get("".concat(this.BASE_URL_PHONE,"/phones?search=").concat(t));case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"tryLogIn",value:function(){var e=Object(g.a)(d.a.mark((function e(t,r){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("".concat(this.BASE_URL_USER,"/login"),{email:"".concat(t),password:"".concat(r)}).then((function(e){200===e.status&&(n=!0,a=e.data)})).catch((function(e){n=!1}));case 2:if(!n){e.next=6;break}return e.abrupt("return",a);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"tryNewRegistry",value:function(){var e=Object(g.a)(d.a.mark((function e(t,r,n){var a,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("".concat(this.BASE_URL_USER,"/singIn"),{email:"".concat(t),password:"".concat(r),name:"".concat(n)}).then((function(e){200===e.status&&(a=!0,o=e.data)})).catch((function(e){a=!1}));case 2:if(!a){e.next=6;break}return e.abrupt("return",o);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"purchasePhone",value:function(){var e=Object(g.a)(d.a.mark((function e(t,r,n){var a,o,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!1,s={headers:{Authorization:"".concat(n)}},e.next=4,E.a.post("".concat(this.BASE_URL_USER,"/logged/purchase"),{idUser:"".concat(t),idStockProduct:"".concat(r)},s).then((function(e){200===e.status&&(a=!0,o=e.data)})).catch((function(e){}));case 4:if(!a){e.next=8;break}return e.abrupt("return",o);case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"isValidToken",value:function(){var e=Object(g.a)(d.a.mark((function e(t){var r,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!1,n={headers:{Authorization:"".concat(t)}},e.next=4,E.a.get("".concat(this.BASE_URL_USER,"/logged/validToken"),n).then((function(e){200===e.status&&(r=!0)})).catch((function(e){}));case 4:return e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getLastProductPurchase",value:function(){var e=Object(g.a)(d.a.mark((function e(t){var r,n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!1,a={headers:{Authorization:"".concat(t)}},e.next=4,E.a.get("".concat(this.BASE_URL_USER,"/logged/getLastPurchase"),a).then((function(e){200===e.status&&(r=!0,n=e.data)})).catch((function(e){}));case 4:if(!r){e.next=8;break}return e.abrupt("return",n);case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}()),x=r(22),P=function(e){return{type:"NEW_IS_BACK_BUTTON",payload:{isBackButton:e}}},y=function(e){return{type:"NEW_IS_SEARCH_TEXT_BOX",payload:{isSearchTextBox:e}}},S=function(e){return{type:"NEW_PHONES_JSON",payload:{phonesJSON:e}}},O=function(e){return{type:"NEW_ACTIVE_PAGE",payload:{activePage:e}}},B=r(164),k=r.n(B);r(224);var N=Object(x.b)((function(e){return{phoneSearchText:e.toolbar.phoneSearchText,isBarPagesVisible:e.phones.isBarPagesVisible}}),(function(e){return{newPhoneSearchText:function(t){return e(function(e){return{type:"NEW_PHONE_SEARCH_TEXT",payload:{phoneSearchText:e}}}(t))},newPhonesJSON:function(t){return e(S(t))},newIsBarPagesVisible:function(t){return e(function(e){return{type:"NEW_IS_BAR_PAGES_VISIBLE",payload:{isBarPagesVisible:e}}}(t))},newActivePage:function(t){return e(O(t))}}}))((function(e){var t=function(){var t=Object(g.a)(d.a.mark((function t(){var r,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==e.phoneSearchText){t.next=9;break}return t.next=3,w.getAllCheapestModelsWithStockPaged(0);case 3:r=t.sent,e.newPhonesJSON(r.content),e.newIsBarPagesVisible(!0),e.newActivePage(1),t.next=15;break;case 9:return t.next=11,w.getPhonesFilteredByKeywords(e.phoneSearchText);case 11:n=t.sent,e.newPhonesJSON(n),e.newPhoneSearchText(""),e.newIsBarPagesVisible(!1);case 15:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return a.a.createElement("div",{className:"SearcherTextBox",style:{visibility:e.visibility}},a.a.createElement("div",{className:"searchIcon"},a.a.createElement(k.a,null)),a.a.createElement("input",{className:"textBoxSearch",type:"text",placeholder:"Mobile Phone...",onChange:function(t){return e.newPhoneSearchText(t.target.value)},onKeyDown:function(e){return"Enter"===e.key&&t()},value:e.phoneSearchText}))})),T=r(38),L=r(39),R=r(41),j=new(function(){function e(){Object(f.a)(this,e)}return Object(v.a)(e,[{key:"saveUserOnBrowserStorage",value:function(e,t){t?localStorage.setItem("User",JSON.stringify(e)):sessionStorage.setItem("User",JSON.stringify(e))}},{key:"saveTokenOnBrowserStorage",value:function(e,t){t?localStorage.setItem("Token",e):sessionStorage.setItem("Token",e)}},{key:"deleteDataLogin",value:function(e){e?(localStorage.removeItem("User"),localStorage.removeItem("Token")):(sessionStorage.removeItem("User"),sessionStorage.removeItem("Token"))}},{key:"getToken",value:function(e){return e?localStorage.getItem("Token"):sessionStorage.getItem("Token")}},{key:"getUser",value:function(e){return e?JSON.parse(localStorage.getItem("User")):JSON.parse(sessionStorage.getItem("User"))}},{key:"ifExistTokenOnLocalStorage",value:function(){return null!==localStorage.getItem("Token")}},{key:"ifExistTokenOnSessionStorage",value:function(){return null!==sessionStorage.getItem("Token")}}]),e}()),C=function(e){return{type:"NEW_SHOW_LOGIN_BOX",payload:{showLoginBox:e}}},_=function(e){return{type:"NEW_REMEMBER_ME",payload:{rememberMe:e}}},I=function(e){return{type:"NEW_IS_LOGGED",payload:{isLogged:e}}},U=function(e){return{type:"NEW_USER",payload:{user:e}}},A=function(e){return{type:"NEW_LAST_PURCHASE_REDIRECT",payload:{lastPurchaseRedirect:e}}},M=r(407),W=r(404),D=r(395),V=(r(225),function(e){function t(e){var r;return Object(f.a)(this,t),(r=Object(T.a)(this,Object(L.a)(t).call(this,e))).onRememberMeChange=function(){var e=!r.props.rememberMe;r.props.newRememberMe(e)},r.onSignInClicked=function(){""!==r.state.emailTextBox&&""!==r.state.passwordTextBox?r.state.isRegister?""!==r.state.nameTextBox?(r.setState({isEmailOrPasswordWrong:!1,nameWrong:!1,isUserAlredyExist:!1}),r.tryNewRegistry()):r.setState({nameWrong:!0,isEmailOrPasswordWrong:!1,isUserAlredyExist:!1}):(r.setState({isEmailOrPasswordWrong:!1}),r.tryLogin()):r.setState({isEmailOrPasswordWrong:!0,nameWrong:!1,isUserAlredyExist:!1})},r.onCloseLoginDialog=function(){r.props.newShowLoginBox(!1),r.setState({isEmailOrPasswordWrong:!1,isRegister:!1,isUserAlredyExist:!1,nameWrong:!1,emailTextBox:"",nameTextBox:"",passwordTextBox:""})},r.onNewRegisterClicked=function(){r.setState({emailTextBox:"",nameTextBox:"",passwordTextBox:"",isEmailOrPasswordWrong:!1,isRegister:!0})},r.state={emailTextBox:"",nameTextBox:"",passwordTextBox:"",isEmailOrPasswordWrong:!1,isRegister:!1,isUserAlredyExist:!1,nameWrong:!1},r}return Object(R.a)(t,e),Object(v.a)(t,[{key:"tryLogin",value:function(){var e=Object(g.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.tryLogIn(this.state.emailTextBox,this.state.passwordTextBox);case 2:(t=e.sent)?(this.props.newUser(t),j.saveUserOnBrowserStorage(t,this.props.rememberMe),j.saveTokenOnBrowserStorage(t.password,this.props.rememberMe),this.props.newIsLogged(!0),this.props.newShowLoginBox(!1),this.setState({isEmailOrPasswordWrong:!1})):this.setState({isEmailOrPasswordWrong:!0});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"tryNewRegistry",value:function(){var e=Object(g.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.tryNewRegistry(this.state.emailTextBox,this.state.passwordTextBox,this.state.nameTextBox);case 2:(t=e.sent)?(this.props.newUser(t),j.saveUserOnBrowserStorage(t,this.props.rememberMe),j.saveTokenOnBrowserStorage(t.password,this.props.rememberMe),this.props.newIsLogged(!0),this.props.newShowLoginBox(!1),this.setState({isEmailOrPasswordWrong:!1,isRegister:!1,isUserAlredyExist:!1,nameWrong:!1})):this.setState({isUserAlredyExist:!0});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return a.a.createElement(M.a,{onClose:this.onCloseLoginDialog,"aria-labelledby":"simple-dialog-title",open:this.props.showLoginBox},a.a.createElement("div",{className:"LoginDialog"},a.a.createElement("div",{className:"boxLogin"},a.a.createElement("form",{className:"login-form"},a.a.createElement("div",{className:"login-title"},"Login"),a.a.createElement("input",{className:"textBoxLogin",type:"text",placeholder:"Email",onChange:function(t){return e.setState({emailTextBox:t.target.value})},value:this.state.emailTextBox,onKeyDown:function(t){return"Enter"===t.key&&e.onSignInClicked()}}),this.state.isRegister&&a.a.createElement("input",{className:"textBoxLogin",type:"text",placeholder:"Name",onChange:function(t){return e.setState({nameTextBox:t.target.value})},value:this.state.nameTextBox,onKeyDown:function(t){return"Enter"===t.key&&e.onSignInClicked()}}),a.a.createElement("input",{className:"textBoxLogin",type:"password",placeholder:"Password",onChange:function(t){return e.setState({passwordTextBox:t.target.value})},value:this.state.passwordTextBox,onKeyDown:function(t){return"Enter"===t.key&&e.onSignInClicked()}})),a.a.createElement("div",{className:"sign-in"},a.a.createElement("div",null,a.a.createElement(W.a,{checked:this.props.rememberMe,onChange:this.onRememberMeChange,color:"secondary",inputProps:{"aria-label":"checkbox remember-me"}}),"Remember me"),a.a.createElement(D.a,{variant:"contained",color:"primary",className:"buttonSignIn",onClick:this.onSignInClicked},this.state.isRegister?"Sign in":"Login")),!this.state.isRegister&&a.a.createElement("div",{className:"sing-up-new"},"New?",a.a.createElement("span",{onClick:this.onNewRegisterClicked},"Sing Up")),this.state.isEmailOrPasswordWrong&&a.a.createElement("h6",null,"Email or password is wrong"),this.state.nameWrong&&a.a.createElement("h6",null,"Name is wrong"),this.state.isUserAlredyExist&&a.a.createElement("h6",null,"User already exist"))))}}]),t}(n.Component)),H=Object(x.b)((function(e){return{showLoginBox:e.user.showLoginBox,isLogged:e.user.isLogged,rememberMe:e.user.rememberMe,user:e.user.user}}),(function(e){return{newRememberMe:function(t){return e(_(t))},newIsLogged:function(t){return e(I(t))},newShowLoginBox:function(t){return e(C(t))},newUser:function(t){return e(U(t))}}}))(V),J=r(405);var G=function(e){return a.a.createElement(J.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:e.open,autoHideDuration:2500,onClose:e.onClose,ContentProps:{"aria-describedby":"message-no-purchases"},message:a.a.createElement("span",{id:"message-id"},e.message)})},F=r(165),z=r.n(F),K=(r(226),r(406)),X=r(402),Y=function(e){function t(e){var r;return Object(f.a)(this,t),(r=Object(T.a)(this,Object(L.a)(t).call(this,e))).onUserClicked=function(){r.props.isLogged?r.setState({showUserMenu:!0}):r.props.newShowLoginBox(!0)},r.onLastPurchaseClick=function(){r.setState({showUserMenu:!1}),r.userStillLoggedShowPurchase()},r.onLogOutClick=function(){r.setState({showUserMenu:!1}),r.userLogOut(),"/purchased"===r.props.location.pathname&&(window.location.href="http://localhost:3000/")},r.onUserMenuClose=function(){r.setState({showUserMenu:!1})},r.state={showSnackBar:!1,showUserMenu:!1},r.shouldRememberLastUser(),r.refUserButton=a.a.createRef(),r}return Object(R.a)(t,e),Object(v.a)(t,[{key:"shouldRememberLastUser",value:function(){var e=Object(g.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j.ifExistTokenOnLocalStorage()){e.next=12;break}return e.next=3,w.isValidToken(j.getToken(!0));case 3:if(!e.sent){e.next=9;break}this.props.newUser(j.getUser(!0)),this.props.newIsLogged(!0),this.props.newRememberMe(!0),e.next=10;break;case 9:j.deleteDataLogin(!0);case 10:e.next=21;break;case 12:if(!j.ifExistTokenOnSessionStorage()){e.next=21;break}return e.next=15,w.isValidToken(j.getToken(!1));case 15:if(!e.sent){e.next=20;break}this.props.newUser(j.getUser(!1)),this.props.newIsLogged(!0),e.next=21;break;case 20:j.deleteDataLogin(!1);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"userStillLoggedShowPurchase",value:function(){var e=Object(g.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.isValidToken(j.getToken(this.props.rememberMe));case 2:if(!e.sent){e.next=12;break}return e.next=5,w.getLastProductPurchase(j.getToken(this.props.rememberMe));case 5:if(!e.sent){e.next=9;break}this.props.newLastPurchaseRedirect(!0),e.next=10;break;case 9:this.setState({showSnackBar:!0});case 10:e.next=16;break;case 12:j.deleteDataLogin(this.props.rememberMe),this.props.newRememberMe(!1),this.props.newIsLogged(!1),this.props.newShowLoginBox(!0);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"userLogOut",value:function(){j.deleteDataLogin(this.props.rememberMe),this.props.newIsLogged(!1),this.props.newRememberMe(!1)}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"UserButton",ref:this.refUserButton},a.a.createElement(u.a,{className:"userIcon","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:this.onUserClicked,color:"inherit",size:"small"},a.a.createElement(z.a,null)),a.a.createElement(H,null),a.a.createElement(G,{className:"snackBar",open:this.state.showSnackBar,onClose:function(t,r){return e.setState({showSnackBar:!1})},message:"You have not bought anything yet"}),a.a.createElement(X.a,{id:"menu-appbar",anchorEl:this.refUserButton.current,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:this.state.showUserMenu,onClose:this.onUserMenuClose},!("/purchased"===this.props.location.pathname)&&a.a.createElement(K.a,{onClick:this.onLastPurchaseClick},"Last Purchase"),a.a.createElement(K.a,{onClick:this.onLogOutClick},"Logout")),this.props.lastPurchaseRedirect&&a.a.createElement(c.a,{push:!0,to:"/purchased"}))}}]),t}(n.Component),$=Object(c.g)(Object(x.b)((function(e){return{showLoginBox:e.user.showLoginBox,isLogged:e.user.isLogged,rememberMe:e.user.rememberMe,user:e.user.user,lastPurchaseRedirect:e.user.lastPurchaseRedirect}}),(function(e){return{newShowLoginBox:function(t){return e(C(t))},newIsLogged:function(t){return e(I(t))},newRememberMe:function(t){return e(_(t))},newUser:function(t){return e(U(t))},newLastPurchaseRedirect:function(t){return e(A(t))}}}))(Y)),q=(r(227),r(166)),Q=r.n(q);var Z=Object(x.b)((function(e){return{isBackButton:e.toolbar.isBackButton,isSearchTextBox:e.toolbar.isSearchTextBox}}))((function(e){return a.a.createElement("div",{className:"Toolbar"},a.a.createElement(p,{visibility:e.isBackButton?"visible":"hidden"}),a.a.createElement("a",{className:"linkLogo",href:"http://localhost:3000"},a.a.createElement("img",{className:"logo",src:Q.a,alt:"Phone Bear logo"})),a.a.createElement(N,{visibility:e.isSearchTextBox?"visible":"hidden"}),a.a.createElement($,null))}));r(228);var ee=function(e){var t=e.phone;return a.a.createElement("div",{className:"CardPhone"},a.a.createElement("img",{className:"imagePhone",src:t.model.image,alt:"Phone"}),a.a.createElement("div",{className:"body-card"},a.a.createElement("div",{className:"brand-model"},a.a.createElement("div",{className:"brand"},"".concat(t.brand.name)),a.a.createElement("div",{className:"model"}," ".concat(t.model.name))),a.a.createElement("div",{className:"price"},"".concat(t.price,"\u20ac")),a.a.createElement("div",{className:"seeProduct"},"SEE PRODUCT")))},te=(r(229),r(400)),re=function(e){function t(e){var r;return Object(f.a)(this,t),(r=Object(T.a)(this,Object(L.a)(t).call(this,e))).onPageChange=function(e,t){r.getPhonesPagedFromAPI(t.activePage-1),r.props.newActivePage(t.activePage)},r.state={totalPages:0},r.props.newIsBackButton(!1),r.props.newIsSearchTextBox(!0),r.getPhonesPagedFromAPI(r.props.activePage-1),r}return Object(R.a)(t,e),Object(v.a)(t,[{key:"getPhonesPagedFromAPI",value:function(){var e=Object(g.a)(d.a.mark((function e(t){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.getAllCheapestModelsWithStockPaged(t);case 2:r=e.sent,this.props.newPhonesJSON(r.content),this.setState({totalPages:r.totalPages});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return a.a.createElement("div",{className:"PhonesAll"},a.a.createElement("div",{className:"phonesList"},this.props.phonesJSON.map((function(e){return a.a.createElement("div",{key:e.model.id},a.a.createElement("div",{className:"phoneCardLink"},a.a.createElement(i.b,{to:"/phone/"+e.model.id,key:e.model.id,style:{textDecoration:"none"}},a.a.createElement(ee,{phone:e,key:e.model.id}))))}))),this.props.isBarPagesVisible&&a.a.createElement("div",{className:"paginationBar"},a.a.createElement(te.a,{activePage:this.props.activePage,onPageChange:this.onPageChange,totalPages:this.state.totalPages,siblingRange:0,boundaryRange:1})),0===this.props.phonesJSON.length&&a.a.createElement("div",null,"No results found for that search."))}}]),t}(n.Component),ne=Object(x.b)((function(e){return{isBackButton:e.toolbar.isBackButton,isSearchTextBox:e.toolbar.isSearchTextBox,phoneSearchText:e.toolbar.phoneSearchText,phonesJSON:e.phones.phonesJSON,isBarPagesVisible:e.phones.isBarPagesVisible,activePage:e.phones.activePage}}),(function(e){return{newIsBackButton:function(t){return e(P(t))},newIsSearchTextBox:function(t){return e(y(t))},newPhonesJSON:function(t){return e(S(t))},newActivePage:function(t){return e(O(t))}}}))(re),ae=(r(354),r(401)),oe=r(397),se=function(e){function t(e){var r;return Object(f.a)(this,t),(r=Object(T.a)(this,Object(L.a)(t).call(this,e))).onRadioButtonVersionChange=function(e){var t=parseInt(e.currentTarget.value,10),n=r.state.productsOfModel.filter((function(e){return e.id===t})),a=r.state.allProductsCombination.find((function(e){return e.id===t})),o=r.state.allProductsCombination.filter((function(e){return e.version===a.version}));r.setState({price:n[0].price,version:n[0].id,color:n[0].id,colors:o})},r.onRadioButtonColorChange=function(e){var t=parseInt(e.currentTarget.value,10),n=r.state.productsOfModel.filter((function(e){return e.id===t}));r.setState({price:n[0].price,color:t})},r.onPurchaseButtonClicked=function(){r.props.isLogged?r.purchasePhone():r.props.newShowLoginBox(!0)},r.state={productsOfModel:[],productSelected:[],src:"",brand:"",model:"",description:"",price:0,version:0,color:"",allProductsCombination:[],versions:[],colors:[],purchaseRedirect:!1},r.props.newIsBackButton(!0),r.props.newIsSearchTextBox(!1),r.getPhoneFromAPI(),r}return Object(R.a)(t,e),Object(v.a)(t,[{key:"getPhoneFromAPI",value:function(){var e=Object(g.a)(d.a.mark((function e(){var t,r,n,a,o,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.id,e.next=3,w.getAllProductsOfThisModelWithStockOrderedByPrice(t);case 3:r=e.sent,n=r.map((function(e){return{id:e.id,version:"".concat(e.ram.value," GB \xb7 ").concat(e.storage.value," GB"),color:e.color.name}})),a=[],o=n.filter((function(e){return!a.includes(e.version)&&(a.push(e.version),!0)})),s=n.filter((function(e){return e.version===n[0].version})),this.setState({productsOfModel:r,productSelected:r[0],brand:r[0].brand.name,src:r[0].model.image,model:r[0].model.name,description:r[0].model.description,price:r[0].price,version:r[0].id,color:r[0].id,allProductsCombination:n,versions:o,colors:s});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"purchasePhone",value:function(){var e=Object(g.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.purchasePhone(this.props.user.id,this.state.color,j.getToken(this.props.rememberMe));case 2:e.sent?(this.props.newIsNewPurchase(!0),this.setState({purchaseRedirect:!0})):(j.deleteDataLogin(this.props.rememberMe),this.props.newRememberMe(!1),this.props.newIsLogged(!1),this.props.newShowLoginBox(!0));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fillVersionRadioButtons",value:function(){var e=this;return this.state.versions.map((function(t){return a.a.createElement("div",{key:t.id},a.a.createElement(ae.a,{checked:e.state.version===t.id,color:"secondary",onChange:e.onRadioButtonVersionChange,value:t.id,name:"version",inputProps:{"aria-label":"version"}}),"".concat(t.version))}))}},{key:"fillColorRadioButtons",value:function(){var e=this;return this.state.colors.map((function(t){return a.a.createElement("div",{key:t.id},a.a.createElement(ae.a,{checked:e.state.color===t.id,color:"secondary",onChange:e.onRadioButtonColorChange,value:t.id,name:"color",inputProps:{"aria-label":"color"}}),t.color)}))}},{key:"render",value:function(){return a.a.createElement("div",{className:"PhoneDetail"},a.a.createElement("div",{className:"image-forms"},a.a.createElement("div",{className:"image-model-price"},a.a.createElement("img",{className:"img-phone",src:this.state.src,alt:"Product"}),a.a.createElement("div",{className:"model-price"},a.a.createElement("div",{className:"model"},"".concat(this.state.brand," ").concat(this.state.model)),a.a.createElement("div",{className:"price"},"".concat(this.state.price,"\u20ac")))),a.a.createElement("form",null,a.a.createElement("div",{className:"title-version"},"Color"),this.fillColorRadioButtons()),a.a.createElement("form",null,a.a.createElement("div",{className:"title-version"},"RAM \xb7 Storage"),this.fillVersionRadioButtons())),a.a.createElement("div",{className:"data-purchase-btn"},a.a.createElement("div",{className:"data"},this.state.description),a.a.createElement("div",{className:"btn-container"},a.a.createElement(oe.a,{variant:"extended",size:"large",color:"secondary","aria-label":"purchase",className:"purchase-button",onClick:this.onPurchaseButtonClicked},a.a.createElement("span",{className:"text-name"},"PURCHASE")))),this.state.purchaseRedirect&&a.a.createElement(c.a,{push:!0,to:"/purchased"}))}}]),t}(n.Component),ie=Object(x.b)((function(e){return{isBackButton:e.toolbar.isBackButton,isSearchTextBox:e.toolbar.isSearchTextBox,isLogged:e.user.isLogged,showLoginBox:e.user.showLoginBox,user:e.user.user,rememberMe:e.user.rememberMe}}),(function(e){return{newIsBackButton:function(t){return e(P(t))},newIsSearchTextBox:function(t){return e(y(t))},newShowLoginBox:function(t){return e(C(t))},newIsLogged:function(t){return e(I(t))},newRememberMe:function(t){return e(_(t))},newUser:function(t){return e(U(t))},newIsNewPurchase:function(t){return e(function(e){return{type:"NEW_IS_NEW_PURCHASE",payload:{isNewPurchase:e}}}(t))}}}))(se);var ce=function(){return a.a.createElement("div",{className:"NotFound"},a.a.createElement("h1",null,"NOT FOUND"),a.a.createElement("h1",null,"404"))},ue=(r(355),function(e){function t(e){var r;return Object(f.a)(this,t),(r=Object(T.a)(this,Object(L.a)(t).call(this,e))).state={phone:[],src:"",brand:"",model:"",color:"",price:0,ram:0,storage:0,dataPhone:"",lastPhonePurchasedDataRecived:!1},r.props.newIsBackButton(!1),r.props.newIsSearchTextBox(!1),r.props.newLastPurchaseRedirect(!1),r.getLastUserPurchaseFromAPI(),r}return Object(R.a)(t,e),Object(v.a)(t,[{key:"getLastUserPurchaseFromAPI",value:function(){var e=Object(g.a)(d.a.mark((function e(){var t,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=j.getToken(this.props.rememberMe),e.next=3,w.getLastProductPurchase(t);case 3:r=e.sent,this.setState({phone:r,src:r.model.image,brand:r.brand.name,model:r.model.name,color:r.color.name,price:r.price,ram:r.ram.value,storage:r.storage.value,dataPhone:r.model.description,lastPhonePurchasedDataRecived:!0});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"lastPurchaseExist",value:function(){return a.a.createElement("div",null,a.a.createElement("h2",{className:"congratulations"},this.props.isNewPurchase?"Congratulations ":"Hi, ",this.props.user.name),a.a.createElement("h5",{className:"phonePurchased"},this.props.isNewPurchase?"You have purchased a new phone! ":"This is your last phone purchased: "),a.a.createElement("div",{className:"dataPhone"},a.a.createElement("img",{className:"imgPhone",src:this.state.src,alt:"Phone Purchased"}),a.a.createElement("div",{className:"allDataText"},a.a.createElement("div",{className:"model-price"},a.a.createElement("div",null,this.state.brand," ",this.state.model),a.a.createElement("div",{className:"price"},this.state.price,"\u20ac")),a.a.createElement("div",{className:"features"},"Color: ",this.state.color," - RAM: ",this.state.ram,"GB \xb7 Storage: ",this.state.storage,"GB"),a.a.createElement("div",null,this.state.dataPhone))))}},{key:"render",value:function(){return a.a.createElement("div",{className:"PhonePurchased"},this.state.lastPhonePurchasedDataRecived&&this.lastPurchaseExist())}}]),t}(n.Component)),le=Object(x.b)((function(e){return{isBackButton:e.toolbar.isBackButton,isSearchTextBox:e.toolbar.isSearchTextBox,user:e.user.user,lastPurchaseRedirect:e.user.lastPurchaseRedirect,isNewPurchase:e.user.isNewPurchase,rememberMe:e.user.rememberMe}}),(function(e){return{newIsBackButton:function(t){return e(P(t))},newIsSearchTextBox:function(t){return e(y(t))},newLastPurchaseRedirect:function(t){return e(A(t))}}}))(ue);r(356);var he=function(e){return a.a.createElement("footer",{className:"Footer"},a.a.createElement("div",{className:"copyright"},a.a.createElement("p",{className:"copyright-text"},"Copyright \xa9 2019 Phone Bear Spain S.L. All Rights Reserved.")))},pe=r(398);var me=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(i.a,{basename:"/"},a.a.createElement(pe.a,{position:"static"},a.a.createElement(Z,null)),a.a.createElement(c.d,null,a.a.createElement(c.b,{path:"/phones",exact:!0,component:ne}),a.a.createElement(c.b,{path:"/phone/:id",exact:!0,component:ie}),a.a.createElement(c.b,{path:"/purchased",exact:!0,component:le}),a.a.createElement(c.a,{path:"/",to:"phones"}),a.a.createElement(c.b,{component:ce})),a.a.createElement(he,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var de=r(94),ge=r(178),fe=Object(ge.a)({palette:{primary:{light:"#D7CCC8",main:"#795548",dark:"#5D4037",contrastText:"#fff"},secondary:{main:"#64dd17"},error:{main:de.a.A400},background:{default:"#fff"}}}),ve=r(399),be=r(57),Ee=r(177),we=r(9);function xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xe(r,!0).forEach((function(t){Object(we.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xe(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ye={isBackButton:!0,isSearchTextBox:!0,phoneSearchText:""},Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW_IS_BACK_BUTTON":return Pe({},e,{isBackButton:t.payload.isBackButton});case"NEW_IS_SEARCH_TEXT_BOX":return Pe({},e,{isSearchTextBox:t.payload.isSearchTextBox});case"NEW_PHONE_SEARCH_TEXT":return Pe({},e,{phoneSearchText:t.payload.phoneSearchText});default:return e}};function Oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Oe(r,!0).forEach((function(t){Object(we.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oe(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ke={phonesJSON:[],isBarPagesVisible:!0,activePage:1},Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW_PHONES_JSON":return Be({},e,{phonesJSON:t.payload.phonesJSON});case"NEW_IS_BAR_PAGES_VISIBLE":return Be({},e,{isBarPagesVisible:t.payload.isBarPagesVisible});case"NEW_ACTIVE_PAGE":return Be({},e,{activePage:t.payload.activePage});default:return e}};function Te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Te(r,!0).forEach((function(t){Object(we.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Te(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Re={showLoginBox:!1,isLogged:!1,rememberMe:!1,user:[],lastPurchaseRedirect:!1,isNewPurchase:!1},je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NEW_SHOW_LOGIN_BOX":return Le({},e,{showLoginBox:t.payload.showLoginBox});case"NEW_REMEMBER_ME":return Le({},e,{rememberMe:t.payload.rememberMe});case"NEW_IS_LOGGED":return Le({},e,{isLogged:t.payload.isLogged});case"NEW_USER":return Le({},e,{user:t.payload.user});case"NEW_LAST_PURCHASE_REDIRECT":return Le({},e,{lastPurchaseRedirect:t.payload.lastPurchaseRedirect});case"NEW_IS_NEW_PURCHASE":return Le({},e,{isNewPurchase:t.payload.isNewPurchase});default:return e}},Ce=Object(be.c)({toolbar:Se,phones:Ne,user:je}),_e=Object(be.d)(Ce,Object(be.a)(Ee.a));s.a.render(a.a.createElement(x.a,{store:_e},a.a.createElement(ve.a,{theme:fe},a.a.createElement(me,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[193,1,2]]]);
//# sourceMappingURL=main.ab8a3665.chunk.js.map